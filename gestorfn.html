<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão Empresarial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: #e0e0e0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .app-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(10px);
        }
        .section {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .card {
            background: linear-gradient(135deg, #16213e, #0f3460);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
            border: 1px solid #00d4ff;
            touch-action: manipulation;
        }
        .card h3 {
            margin: 0 0 10px 0;
            color: #00d4ff;
            font-size: 14px;
        }
        .card p {
            font-size: 24px;
            margin: 0;
            color: #ff007f;
            text-shadow: 0 0 10px #ff007f;
        }
        form {
            margin-bottom: 30px;
            background: rgba(15, 52, 96, 0.5);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid #00d4ff;
        }
        form h2 {
            color: #00d4ff;
            text-align: center;
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #e0e0e0;
            font-size: 14px;
        }
        input, select, button {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid #00d4ff;
            border-radius: 8px;
            box-sizing: border-box;
            background: rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            font-size: 16px;
        }
        input:focus, select:focus {
            outline: none;
            box-shadow: 0 0 10px #00d4ff;
        }
        button {
            background: linear-gradient(90deg, #00d4ff, #ff007f);
            color: white;
            border: none;
            cursor: pointer;
            transition: background 0.3s;
            font-size: 16px;
            height: 50px;
        }
        button:hover {
            background: linear-gradient(90deg, #ff007f, #00d4ff);
            box-shadow: 0 0 15px #ff007f;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: rgba(15, 52, 96, 0.5);
            border-radius: 8px;
            overflow: hidden;
        }
        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #00d4ff;
        }
        table th {
            background: rgba(0, 212, 255, 0.2);
            color: #00d4ff;
            font-size: 14px;
        }
        table td {
            color: #e0e0e0;
            font-size: 14px;
        }
        .action-btn {
            background: none;
            border: none;
            color: #ff007f;
            cursor: pointer;
            margin-right: 10px;
            font-size: 16px;
        }
        .action-btn:hover {
            color: #00d4ff;
        }
        .calculator {
            background: rgba(15, 52, 96, 0.5);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            border: 1px solid #00d4ff;
        }
        .bottom-nav {
            background: rgba(22, 33, 62, 0.9);
            backdrop-filter: blur(10px);
            border-top: 1px solid #00d4ff;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
            z-index: 1000;
        }
        .bottom-nav a {
            color: #00d4ff;
            text-decoration: none;
            text-align: center;
            flex: 1;
            padding: 10px;
            transition: color 0.3s;
        }
        .bottom-nav a.active {
            color: #ff007f;
            text-shadow: 0 0 10px #ff007f;
        }
        .bottom-nav i {
            font-size: 20px;
            display: block;
            margin-bottom: 5px;
        }
        .bottom-nav span {
            font-size: 12px;
        }
        @media (min-width: 768px) {
            .dashboard {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }
            .card h3 {
                font-size: 16px;
            }
            .card p {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div id="dashboard" class="section active">
            <h2 style="text-align: center; color: #00d4ff; margin-bottom: 20px;">Dashboard</h2>
            <div class="dashboard">
                <div class="card">
                    <h3>Total de Compras</h3>
                    <p id="totalCompras">R$ 0.00</p>
                </div>
                <div class="card">
                    <h3>Total de Gastos</h3>
                    <p id="totalGastos">R$ 0.00</p>
                </div>
                <div class="card">
                    <h3>Total de Vendas</h3>
                    <p id="totalVendas">R$ 0.00</p>
                </div>
                <div class="card">
                    <h3>Lucro Líquido</h3>
                    <p id="lucroLiquido">R$ 0.00</p>
                </div>
            </div>
        </div>
        <div id="compras" class="section">
            <h2>Registro de Compras</h2>
            <form id="formCompra">
                <label for="produtoCompra">Produto:</label>
                <input type="text" id="produtoCompra" required>
                <label for="valorCompra">Valor (R$):</label>
                <input type="number" id="valorCompra" step="0.01" required>
                <label for="quantidadeCompra">Quantidade:</label>
                <input type="number" id="quantidadeCompra" required>
                <button type="submit">Registrar Compra</button>
            </form>
            <table id="tabelaCompras">
                <thead>
                    <tr>
                        <th>Produto</th>
                        <th>Valor</th>
                        <th>Quantidade</th>
                        <th>Total</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div id="gastos" class="section">
            <h2>Registro de Gastos</h2>
            <form id="formGasto">
                <label for="descricaoGasto">Descrição:</label>
                <input type="text" id="descricaoGasto" required>
                <label for="valorGasto">Valor (R$):</label>
                <input type="number" id="valorGasto" step="0.01" required>
                <label for="categoriaGasto">Categoria:</label>
                <select id="categoriaGasto" required>
                    <option value="">Selecione</option>
                    <option value="Operacionais">Operacionais</option>
                    <option value="Marketing">Marketing</option>
                    <option value="Outros">Outros</option>
                </select>
                <button type="submit">Registrar Gasto</button>
            </form>
            <table id="tabelaGastos">
                <thead>
                    <tr>
                        <th>Descrição</th>
                        <th>Valor</th>
                        <th>Categoria</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div id="vendas" class="section">
            <h2>Registro de Vendas</h2>
            <form id="formVenda">
                <label for="produtoVenda">Produto:</label>
                <input type="text" id="produtoVenda" required>
                <label for="valorVenda">Valor (R$):</label>
                <input type="number" id="valorVenda" step="0.01" required>
                <label for="quantidadeVenda">Quantidade:</label>
                <input type="number" id="quantidadeVenda" required>
                <label for="dataVenda">Data:</label>
                <input type="date" id="dataVenda" required>
                <button type="submit">Registrar Venda</button>
            </form>
            <h3>Vendas por Dia</h3>
            <table id="tabelaVendasDia">
                <thead>
                    <tr>
                        <th>Data</th>
                        <th>Total Apurado</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <h3>Todas as Vendas</h3>
            <table id="tabelaVendas">
                <thead>
                    <tr>
                        <th>Produto</th>
                        <th>Valor</th>
                        <th>Quantidade</th>
                        <th>Total</th>
                        <th>Data</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div id="calculadora" class="section">
            <h2>Calculadora de Precificação</h2>
            <div class="calculator">
                <label for="nomeProdutoCalc">Nome do Produto:</label>
                <input type="text" id="nomeProdutoCalc" required>
                <label for="valorCaixa">Valor da Caixa (R$):</label>
                <input type="number" id="valorCaixa" step="0.01" required>
                <label for="quantidadeDividir">Quantidade (para dividir):</label>
                <input type="number" id="quantidadeDividir" required>
                <label for="markup">Markup (%):</label>
                <input type="number" id="markup" step="0.01" required>
                <button onclick="calcularPreco()">Calcular Preço</button>
                <p id="resultadoPreco" style="text-align: center; margin-top: 20px; font-size: 18px; color: #ff007f;">Preço Custo: R$ 0.00 | Preço Venda: R$ 0.00</p>
            </div>
        </div>
    </div>
    <nav class="bottom-nav">
        <a href="#" id="nav-dashboard" onclick="showSection('dashboard')" class="active">
            <i class="fas fa-tachometer-alt"></i>
            <span>Dashboard</span>
        </a>
        <a href="#" id="nav-compras" onclick="showSection('compras')">
            <i class="fas fa-shopping-cart"></i>
            <span>Compras</span>
        </a>
        <a href="#" id="nav-gastos" onclick="showSection('gastos')">
            <i class="fas fa-money-bill-wave"></i>
            <span>Gastos</span>
        </a>
        <a href="#" id="nav-vendas" onclick="showSection('vendas')">
            <i class="fas fa-chart-line"></i>
            <span>Vendas</span>
        </a>
        <a href="#" id="nav-calculadora" onclick="showSection('calculadora')">
            <i class="fas fa-calculator"></i>
            <span>Calc</span>
        </a>
    </nav>
    <script>
        // Função para mostrar seções
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');

            // Atualizar navegação ativa
            const navLinks = document.querySelectorAll('.bottom-nav a');
            navLinks.forEach(link => link.classList.remove('active'));
            document.getElementById('nav-' + sectionId).classList.add('active');
        }

        // Carregar dados do localStorage
        let compras = JSON.parse(localStorage.getItem('compras')) || [];
        let gastos = JSON.parse(localStorage.getItem('gastos')) || [];
        let vendas = JSON.parse(localStorage.getItem('vendas')) || [];

        // Funções para atualizar tabelas e dashboard
        function atualizarTabelas() {
            atualizarTabelaCompras();
            atualizarTabelaGastos();
            atualizarTabelaVendas();
            atualizarDashboard();
        }

        function atualizarTabelaCompras() {
            const tbody = document.querySelector('#tabelaCompras tbody');
            tbody.innerHTML = '';
            compras.forEach((compra, index) => {
                const row = `<tr>
                    <td>${compra.produto}</td>
                    <td>R$ ${compra.valor.toFixed(2)}</td>
                    <td>${compra.quantidade}</td>
                    <td>R$ ${(compra.valor * compra.quantidade).toFixed(2)}</td>
                    <td>
                        <button class="action-btn" onclick="editarCompra(${index})"><i class="fas fa-edit"></i></button>
                        <button class="action-btn" onclick="deletarCompra(${index})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        function atualizarTabelaGastos() {
            const tbody = document.querySelector('#tabelaGastos tbody');
            tbody.innerHTML = '';
            gastos.forEach((gasto, index) => {
                const row = `<tr>
                    <td>${gasto.descricao}</td>
                    <td>R$ ${gasto.valor.toFixed(2)}</td>
                    <td>${gasto.categoria}</td>
                    <td>
                        <button class="action-btn" onclick="editarGasto(${index})"><i class="fas fa-edit"></i></button>
                        <button class="action-btn" onclick="deletarGasto(${index})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });
        }

        function atualizarTabelaVendas() {
            const tbody = document.querySelector('#tabelaVendas tbody');
            tbody.innerHTML = '';
            vendas.forEach((venda, index) => {
                const row = `<tr>
                    <td>${venda.produto}</td>
                    <td>R$ ${venda.valor.toFixed(2)}</td>
                    <td>${venda.quantidade}</td>
                    <td>R$ ${(venda.valor * venda.quantidade).toFixed(2)}</td>
                    <td>${venda.data}</td>
                    <td>
                        <button class="action-btn" onclick="editarVenda(${index})"><i class="fas fa-edit"></i></button>
                        <button class="action-btn" onclick="deletarVenda(${index})"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>`;
                tbody.innerHTML += row;
            });

            // Agrupar vendas por data
            const vendasPorDia = {};
            vendas.forEach(venda => {
                const data = venda.data;
                if (!vendasPorDia[data]) vendasPorDia[data] = 0;
                vendasPorDia[data] += venda.valor * venda.quantidade;
            });

            const tbodyDia = document.querySelector('#tabelaVendasDia tbody');
            tbodyDia.innerHTML = '';
            Object.keys(vendasPorDia).sort().forEach(data => {
                const row = `<tr>
                    <td>${data}</td>
                    <td>R$ ${vendasPorDia[data].toFixed(2)}</td>
                </tr>`;
                tbodyDia.innerHTML += row;
            });
        }

        function atualizarDashboard() {
            const totalCompras = compras.reduce((sum, c) => sum + (c.valor * c.quantidade), 0);
            const totalGastos = gastos.reduce((sum, g) => sum + g.valor, 0);
            const totalVendas = vendas.reduce((sum, v) => sum + (v.valor * v.quantidade), 0);
            const lucro = totalVendas - totalCompras - totalGastos;

            document.getElementById('totalCompras').textContent = `R$ ${totalCompras.toFixed(2)}`;
            document
